# Инструкция по git
## Основные команды
Создание репозитория:
```sh
git init
```

Добавление файла в индексацию:
```sh
git add filename
```
Добавление всех файлов в индексацию
```sh
git add .
```
Добавление "коммита" в репозиторий с комментарием в кавычках:
```sh
git commit -m "комментарий"
```
Просмотр полного лога с полным хэшем:
```sh
git log
```
Просмотр лога в одну строку с сокращенным хэшем:
```sh
git log --oneline
```
Переход на другую ветку репозитория
```sh
git checkout hashbranch 
```
## Работа с ветками
Просмотр веток
```sh
git branch
```

Создание ветки
```sh
git branch branch_name
```

Переход на ветку
```sh
git checkout branch_name
```

Слияние двух веток (нужно перейти на ту ветку на в которую нужно влить изменения другой ветки например перейти на ветку master чтобы влить туда изменения из другой ветки)
```sh
git merge branch_name
```

Самый удобный способ просмотра лога
```sh
git log --oneline --graph
```
Удаление метки
```sh
git branch -d branch_name
```

Просмотр лога в виде графа
```sh
git log --graph
```

Для временного сохранения всех незакоммиченных изменений для очистки рабочей директории без необходимости коммитить незавершённую работу в новую ветку.
```sh
git stash
```

Для возвращения сохраненных файлов командой ```git stash``` в рабочую директорию
```sh
git stash pop
```

## Борьба с ошибками слияния

Показать в конфликтном файле ```file.name``` сравнение содержимого сливаемых веток для ручного редактирования
```sh
git checkout --merge file.name
```

Оставить в конфликтном файле ```file.name``` состояние ветки, ```ИЗ КОТОРОЙ``` мы вливаем
```sh
git checkout --theirs file.name
```
Показать в конфликтном файле (```file.name```) сравнение содержимого сливаемых веток плюс то, что было в месте конфликта в коммите, на котором разошлись сливаемые ветки
```sh
git checkout --conflict=diff3 --merge file.name
```

Теперь подружим наши локальные и удаленный репозитории:
1. Создаем репозиторий на github.com с любым названием.
2. Github подскажет какие команды нужно ввести их всего 3:
```sh
git remote add origin https://github.com/gerelDan/test_git_3.git
git branch -M main
git push -u origin main
```
Все на удаленном репозитории закоммитились все изменения из локального репозитрия!

 Теперь для добавления изменений из ветки main можно просто делать:
 ```sh
 git push
 ```
Чтобы вытолкнуть другую ветку нужно на нее перейти и попробовать прием выше:
```sh
git branch new_branch
git checkout new_branch
//Добавить изменений в любой файл//
git add git_howto.md
git commit -m "комментарий"
git push
```
Git покажет нам следующее сообщение:
```sh
fatal: The current branch new_branch has no upstream branch.
To push the current branch and set the remote as upstream, use

    git push --set-upstream origin new_branch
```
Не будем спорить с git'ом сделаем как он говорит
```sh
git push --set-upstream origin new_branch
```
После этих действий достаточно находясь на ветке ```new_branch``` написать: для конфликта напишем
```sh
git push
```
Теперь все ок! ветка запушилась смотрим на github.com там появилась новая ветка!

 Теперь можно попробовать обратный процесс:
 На сайте github.com изменим наш файл и закоммитим эти изменения прямо на сайте.
 Теперь чтобы получить эти же изменения в локальный репозиторий нужно выполнить команду:
 ```sh
 git pull
```
Чтобы посмотреть репозитории в которые мы push'им и из которых pull'им:
```sh
git remote -v
```
Для удаления ветки удаленного репозитория через bash:
```sh
git push origin --delete new_branch
```
Для получения из удаленного репозитория для слияния нашей ветки и удаленной необходимо сделать так:
```sh
git pull --rebase
```