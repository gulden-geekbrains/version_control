# Инструкция для работы с Git

## Что такое Git?

Git — один из видов систем контроля версий (или СКВ). Такие системы записывают изменения в набор файлов, а позже позволяют вернуться к определенной версии. 

Git имеет как локальные, так и удалённые репозитории. Является самой популярной реализацией СКВ в мире.

## Создание репозитория

Для создания репозитория необходимо выполнить команду init в папке с репозиторием. Это включит приложение в этой конкретной папке и создаст скрытую директорию .git, где будет храниться история репозитория и настройки.
```sh
git init
```
## Проверка текущего состояния репозитория

Status — это еще одна важнейшая команда, которая показывает информацию о текущем состоянии репозитория: актуальна ли информация на нём, нет ли чего-то нового, что поменялось, и так далее.
```sh
git status
```
## Создание коммитов
Прежде чем создать коммит необходимо добавить под контроль версий все существующие файлы командой:
```sh
git add <имя файла>
```
Теперь наш файл находится под наблюдением git и мы можем сохранить изменения в репозитории
 командой 
 ```sh
git commit -m "Комментарий"
```
Ключ ​ -m позволяет задать описание коммита. Описание обязательно, иначе коммит не будет выполнен.
## Просмотр истории изменений
Для просмотра всех созданных коммитов можно воспользоваться историей коммитов. Она содержит сведения о каждом проведенном коммите проекта. Запросить ее можно при помощи команды:
```sh
git log
```
В ней содержится вся информация о каждом отдельном коммите, с указанием его хэша, автора, списка изменений и даты, когда они были сделаны.

Для просмотра коммитов в сокращенном варианте можно воспользоваться командой:
```sh
git log --oneline
```
## Переключение между изменениями
С командой git checkout можно не только получать старые коммиты и прежние версии файлов, но и осуществлять навигацию по существующим веткам. Для этого после самой команды необходимо добавить имя (хэш) того коммита, на который хотим переключиться. Причем имя коммита можно указать как целиком так и в сокращенном варианте.
```sh
git checkout <имя коммита>
```
Для переключения между ветками можно использовать команду git checkout <branch_name>. При переключении ветки происходит обновление файлов в рабочем каталоге в соответствии с версией, хранящейся в этой ветке, а git начинает записывать все новые коммиты в этой ветке. Для перехода на основную ветку (master) команда будет выглядеть так:
```sh
git checkout <master>
```
## Просмотр веток. Создание новой ветки
Имя основной ветки Git-проекта по умолчанию — master (однако зачастую бывает main, например, в GitHub), она появляется сразу при инициализации репозитория. А для создания новых веток используется команда:
```sh
git branch <name_of_new_branch>
```
Для просмотра всех имеющихся веток можно воспользоваться командой:
```sh
git branch 
```
С ее помощью можно так же определить на какой из веток вы сейчас находитесь, ведь текущая ветка будет обозначена знаком * . Например:

![Список веток](Ветки.jpg)

## Удаление веток
Для корректного удаления ветки нужно помнить несколько правил, чтобы не получить ошибки:

* Нельзя удалить ветку, в которой вы находитесь. Git выдаст ошибку и не произведет удаление. Следовательно, нужно перейти на другую ветку.

* Если мы хотим избежать ситуации, когда часть написанного кода будет безвозвратно утеряна, то необходимо использовать флаг -d. Этот флаг не позволит удалить ветку, у которой есть несохраненные изменения. В этом случае команда будет выглядеть так:

```sh
git branch -d <name_of_delete_branch>
```

* Если же мы уверены, что изменения в этой версии не нужны и их можно смело удалять, то вместо флага -d можно использовать флаг -D. В этом случае команда будет выглядеть так: 

```sh
git branch -D <name_of_delete_branch>
```
## ОБъединение (слияние) веток
Ветвление позволяет разделять рабочий процесс, оптимизировать тестирование и написание нового кода. Однако после того, как разработчик убедился, что написанный им кусок кода готов и его можно отправить к остальной части итоговой версии, удобно переместить его в основную ветку. Такой подход дает возможность получить к концу разработки проекта целый продукт в одном месте.

Для этого в git предусмотрено слияние, т.е. перенос изменений с одной ветки на другую. Такие преобразования мы получаем, применив команду: 
 ```sh
git merge <name_of_merged_branch>
```
Операция может привести к появлению конфликтов при попытке слить ветки. Это вызвано тем, что изменения удаляют или переписывают информацию в существующих файлах. При попытке некорректного слияния git останавливает выполнение команды, чтобы вы могли разрешить конфликт.

Решить конфликт можно двумя способами:

* Вручную разрешить файловый конфликт. Для этого нужно самим изменить файлы, с которыми возникли проблемы. Мы получим файлы такими, какими и представляли их при попытке слияния.

* Воспользоваться встроенными возможностями редактора (в нашем случае VS Code) и выбрать более подходящий вариант файла, отказавшить от одного из вариантов или принять оба варианта.

## Отображение журнала фиксации в виде графа/дерева
Просмотреть историю коммитов в виде графа/дерева изменений для текущей ветки можно с помощью параметра log и флага --graph:
```sh
git log --graph
```
Опция --graph выведет график, отражающий структуру ветвления истории коммитов. В связке с флагом --oneline, этот флаг упрощает понимание того, к какой ветке относится каждый коммит. Эта команда будет выглядеть так:
```sh
git log --graph --oneline
```
При этом дерево изменений будет выглядеть примерно так:

![Дерево коммитов](Дерево_коммитов.jpg)

## Работа с удаленным репозиторием

Команда клонирования репозитория  используется для первоначального копирования удаленного репозитория, т.е. для создания копии этого репозитория на вашем компьютере. Для ее применения необходимо знать адрес (ссылку) репозитория, копию которого хотите сделать. Например:
```sh
git clone https://github.com/youre_GitHub_name/name_of_reposit.git
```
Для того, чтобы связать наш локальный репозиторий с удаленным (чтобы изменения, вносимые в одном из них, можно было перенести в другой), можно воспользоваться командой:
```sh
git remote add origin https://github.com/youre_GitHub_name/name_of_reposit.git
```
Таким образом мы в качестве удаленного репозитория по умолчанию указываем репозиторий, который находится по указанному адресу. Origin здесь является синонимом удаленного репозитория для более удобного использования, чтобы не писать в дальнейшем каждый раз длинный адрес можно будет написать просто origin.

Чтобы проверить произошла ли привязка удаленного репозитория можно применить команду:
```sh
git remote -v
```
Для просмотра более подробной информации:
```sh
git remote show origin
```
Чтобы автоматически получить изменения из удалённого репозитория и слить их со своим текущим, вы можете использовать команду:
```sh
git pull
```
Если при слиянии возникнет конфликт, то для его разрешения можно применить команду:
```sh
git pull --rebase
```
Таким образом мы увидим различия репозиториев и сможем выбрать один из вариантов решения конфликта как было и в случае с git merge. 

После разрешения конфликта (выбора одного из вариантов версий репозитория), необходимо продолжить предыдущую команду с ключом --continue, чтобы завершить слияние изменений в репозиториях:
 ```sh
git --rebase --continue
```
Когда вы хотите поделиться своими наработками, вам необходимо отправить их в удалённый репозиторий. Команда для этого действия выглядит так:
 ```sh
git push
```
## Pull Request

Запрос на принятие изменений (Pull Request) откроет новую ветвь с обсуждением отправляемого кода, и автор оригинального проекта, а так же другие его участники, могут принимать участие в обсуждении предлагаемых изменений до тех пор, пока автор проекта не будет ими доволен, после чего автор проекта может добавить предлагаемые изменения в проект.

1. Делаем fork репозитория, в которой потом хотим сделать pull request. Ищем кнопку Fork на странице репозитория https://github.com/youre_GitHub_name/name_of_reposit.git

2. Выполняем команду клонирования из своей fork-копии:
```sh
git clone https://github.com/youre_GitHub_name/name_of_reposit.git
```
3. Создаем новую ветку и вносим необходимые изменения в файл, например:
```sh
git checkout -b updatereadme
vim README.md
git add README.md
git commit -m "Добавили инструкцию как создать pull request"
```
4. Делаем push:
```sh
git push --set-upstream origin updatereadme
```
5. Переходим на свою страницу репозитория. Выбираем ветку updatereadme и жмем кнопку Compare & pull request.