# Инструкция к Git

### Создание репозитория

Создать пустой репозиторий Git или вновь инициализировать существующий можно параметром `init`. При инициализации он создаст скрытую папку. В ней содержатся все объекты и ссылки, которые Git использует и создаёт в истории работы над проектом:

```sh
git init
```
***
### Добавление отдельных файлов или всех файлов в область подготовленных файлов

Добавить отдельный файл в область подготовленных файлов можно параметром `add` с указанием имени файла:

```sh
git add <file_name>
```

Кроме того, можно добавить все файлы и папки в эту область, подставив символ ``*`` вместо имени файла:

```sh
git add *
```
***
### Проверка статуса репозитория

Просмотреть статус нужного репозитория можно используя параметр `status`, его действие распространяется на подготовленные, неподготовленные и неотслеживаемые файлы:

```sh
git status
```
***
### Внесение изменений однострочным сообщением или через редактор

При создании коммита в репозитории можно добавить однострочное сообщение с помощью параметра `commit` с флагом `-m`. Само сообщение вводится непосредственно после флага, в кавычках:

```sh
git commit -m "message"
```

Также можно открыть текстовый редактор в терминале для написания полного сообщения коммита. Оно может состоять из нескольких строк текста, в котором подробно характеризуются изменения, внесённые в репозиторий:

```sh
git commit
```
***
### Просмотр истории коммитов с изменениями

Просматривать изменения, внесённые в репозиторий, можно с помощью параметра `log`. Он отображает список последних коммитов в порядке выполнения:

```sh
git log
```
 Кроме того, добавив флаг `-p`, вы можете подробно изучить изменения, внесённые в каждый файл:

 ```sh
 git log -p
 ```

 Если у Вас очень много коммитов, для удобства можно использовать параметр `--oneline`

 ```sh
 git log --oneline
 ```

 Получим сообщение вида:

 ![Команда git log --oneline](pics\par_oneline.jpg "Результат выполнения команды")
***
### Просмотр заданного коммита

Просмотреть полный список изменений, внесённых конкретным коммитом, можно с помощью параметра `show`, указав идентификатор или хеш коммита. Значение хеша уникально для каждого коммита, созданного в вашем репозитории:

```sh
git show <commit_hash>
```

Также можно использовать сокращённый хеш (несколько первых символов).
***
### Просмотр изменений до коммита

Можно просматривать список изменений, внесённых в репозиторий, используя параметр `diff`. По умолчанию отображаются только изменения, не подготовленные для фиксации:

```sh
git diff
```

Для просмотра подготовленных изменений необходимо добавить флаг `--staged`:

```sh
git diff --staged
```
Также можно указать имя файла как параметр и просмотреть изменения, внесённые только в этот файл:

```sh
git diff <file_name>
```
***
### Отмена подготовленных и неподготовленных изменений

Восстановить файлы рабочего дерева, не подготовленные к коммиту, можно параметром `checkout`. Для проведения операции требуется указать путь к файлу. Если путь не указан, параметр `git checkout` изменит указатель HEAD, чтобы задать указанную ветку как текущую:

```sh
git checkout <file_name>
```

Если нужно выполнить это действие для всех подготовленных файлов, путь к ним указывать не надо:

```sh
git checkout 
```

Для возращения файлов из последнего коммита добавьте имя ветки:

```sh
git checkout <branch_name>
```

Восстановить подготовленный файл рабочего дерева можно параметром `reset`. Потребуется указать путь к файлу, чтобы убрать его из области подготовленных файлов. При этом не будет производиться откат никаких изменений или модификаций — однако файл перейдёт в категорию не подготовленных к коммиту:

```sh
git reset HEAD <file_name>
```

Аналогично с `checkout`, для изменения всех файлов:
```sh
git reset HEAD
```

### Работа с ветками 

Команда `git branch` — главный инструмент для работы с ветвлением. С ее помощью можно добавлять новые ветки, перечислять и переименовывать существующие и удалять их.

#### Способы создания веток и переключения между ними

Чтобы в Git добавить ветку мы используем:

```sh
git branch <name_of_new_branch>
```
После данной операции ветка уже была создана, но вы по-прежнему находитесь в прежней ветке. Если вы планируете переместиться на другую ветку, в том числе только что созданную, необходимо написать ``checkout``:

```sh
git checkout <name_of_branch>
```
Для того чтобы определить, где сейчас находится разработчик, Git использует специальный указатель ``HEAD``, ссылающийся на текущую локальную ветку. В результате checkout `HEAD` переместится на иную ветку.

Для слияния веток используем команду `merge`. Для этого нужно переместиться в ветку с которой мы хотим присоединить наши изменения (команда `checkout`) и выбираем имя присоединяемой ветки. Например, мы хотим влить изменения в ветку `master`:

```sh
git checkout master
git merge <branch_name>
```

Может возникнуть ситуация, когда изменения из ветки конфликтуют с данными из основной ветки, git нам сообщит о ней и предложит внести изменения вручную, либо выбрать внести изменения или оставить прежними. Выглядит это так:

![Конфликт слияния веток](pics\Conflict.jpg)

Для удаления ветки используем ключ `-d`:

```sh
git branch -d <branch_name>
```

## Работа с удаленным репозиторием

### Добавление удаленного репозитория к существующему локальному. Команда `git remote add`.

Для того чтобы добавить удаленный репозиторий нужно ввести команду:

```sh
git remote add <название_удаленного_репозитория> <ссылка_на_удаленный репозиторий>
```

Обычно удаленный репозиторий именуют `origin`

В GitHub можно использовать три типа ссылок:

- HTTPS
- SSH
- GitHub CLI

Иногда возникает необходимость забыть удаленный репозиторий. Для этого существует команда `git remote remove`:

```sh
git remote remove <название_удаленного_репозитория>
```

### Просмотр всех удаленных репозиториев. Команды git remote rename, git remote show.

Иногда возникает необходимость переименовать удаленный репозиторий. Для этого существует команда `git remote rename`:

```sh
git remote rename <старое_имя_удаленного_репозитория> <новое_имя_удаленного репозитория>
```

Еще более частая задача – просмотреть список всех подключенных удаленных репозиториев и получить информацию о каждом из них. Для этого существует команда `git remote show`:

```sh
git remote show [имя_удаленного_репозитория]
```

### Клонирование удаленного репозитория. Команда `git clone`.

Необходимость клонировать существующий удаленный репозиторий возникает в ситуациях, когда вы решаете поработать над уже существующим кодом. Для выполнения этой операции в Git предусмотрена команда `git clone`:

```sh
git clone <ссылка_на_удаленный_репозиторий>
```

### Получение изменений из удаленного репозитория. Команда `git fetch`.

чтобы получить изменения из удаленного репозитория, в Git предусмотрена команда `git fetch`:

```sh
git fetch [ключи] [имя удаленного репозитория]
```

#### Ключи

`--all`
Получает изменения из всех подключенных удаленных репозиториев.

Важным замечанием здесь станет то, что команда не обновляет рабочую копию в соответствии с удаленным репозиторием. Она обновляет только ссылочные объекты (указатели, ветки и теги) и скачивает все необходимые файлы в директорию *.git/objects*.

**Важно!**

Команда `git fetch` используется для синхронизации локальных ссылочных объектов с этими же объектами в удаленном репозитории. Рабочую копию она не меняет.
Чтобы синхронизировать локальную рабочую копию с удаленным репозиторием, нужно слить удаленные ветки в локальные. Сделать это можно уже знакомой командой `git merge`.

### Получение изменений из удаленного репозитория. Команда `git pull`.

Связкой `git fetch && git merge` мы получим изменения из удаленного репозитория и обновим свою рабочую копию. Часто вместо этого хочется получать изменения и сразу обновлять рабочую копию так, чтобы она соответствовала удаленному репозиторию. И для этого в Git существует отдельная команда. Называется она `git pull`:

```sh
git pull [ключи] [имя_удаленного_репозитория]
```

#### Ключи

`--ff`

`--no-ff`

`--ff-only`

Эти ключи определяют стратегию слияния. `--ff` – включить fast-forward, если это возможно, `--no-ff` – отключить fast-forward, а `--ff-only` – остановить pull, если его невозможно сделать в fast-forward.

На самом деле, новых команд здесь нет. Команда `git pull` это просто сокращение последовательного применения `git fetch` и `git merge`. Но используется `git pull` намного чаще.

### Отправка изменений в удаленный репозиторий. Команда git push.

Мы знаем почти все про удаленный репозиторий. Осталось изучить, как загружать в него свои локальные изменения. Для этого в Git существует команда `git push`:

```sh
git push [ключи] [имя_удаленного_репозитория] [имя_ветки]
```

`--all`
Пушит все имеющиеся ветки

`-f`, `--force`
Перезаписывает удаленную ветку, вне зависимости от ее содержимого. 

`--force-with-lease`
Удаляет все коммиты, которых нет в локальном репозитории. Если коммит, который команда соберется удалять был создан другим пользователем, то выполнение закончится с ошибкой.

***
