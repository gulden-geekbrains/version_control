# Инструкция по работе с GIT

## Краткое введение и терминология

Системы контроля версий, одной из которых является **git**, используются при работе с самыми разными проектами.

**Git** на уровне проекта позволяет: 
* сохранять 
* отменять
* создавать несколько вариантов

Каталог с проектом в этом случае называется **репозиторием (repository)**. 

Каждое глобальное сохранение называется **коммитом (commit)** и сохраняет текущую версию проекта, к которой всегда можно будет вернуться в любой момент.

Также возможна работа с *несколькими версиями*, при этом не возникает множества файлов разных версий *(все изменения сохраняются в системной папке **.git**, находящейся в корне репозитория, и ее лучше не трогать)*. 

**GIT** позволяет работать с несколькими копиями репозитория, беря на себя все проблемы, связанные с синхронизацией данных. 
Это не только предохраняет от потери данных, но и делает возможным эффективную командную работу над проектом.

## Подготовка

1. **Регистрация на GitHub**

2. Установить git с официального сайта по  [инструкции](http.git­scm.com/downloads "git download")

3. Все команды **git** выполняются в **терминале (коммандной строке)**

4. Настройка git. Нам будет достаточно только задать имя и email командами: 

    * **git config ­­--global user.name "Oleg Yasnev"**

    * **git config --­­global user.email oyasnev@gmail.com** 

*Вы, естественно, подставляете свои имя и email* 

## Создание репозитория на GitHub

Для создания репозитория на GitHub нужно:
1. Войти в систему

2. В навигационной
панели сверху рядом с вашим именем выбрать **"+"** и **"New repository"** 

3. Заполняем поля: 

 * Repository name: *test* 

 * Description: *Test repository* 

 * Оставляем выбранным пункт *"Public"*

 *  Проставляем флажок *"Initialize this reository with a README"* 

4. Нажимаем кнопку **"Create repository"**

**Репозиторий создан!** 

## Базовые операции

### **Создание локальной копии репозитория** 

 * Перейдите в каталог, где должен будет появиться каталог репозитория
 * Запустите в нем терминал. 
 * После запуска в терминале наберите команду: 

    **git clone https://github.com/oyasnev/test** 

В результате в текущем каталоге будет создан подкаталог *test*, содержащий копию главного репозитория. 
Для работы с репозиторием необходимо перейти в его
каталог командой **cd test**.

### **Добавление новый файлов в репозиторий**

* Создайте в каталоге репозитория *test* текстовый файл **first.txt**,
 содержащий строку текста *"Some
text"*. 
* Чтобы git начил его отслеживать­ нужно использовать команду:
    **git add first.txt**

* Сохраните изменения в
репозитории, сделав первый коммит: 
    **git commit -­m "My first commit"**
Ключ *-­m* позволяет задать описание коммита. Описание обязательно, иначе
коммит не будет выполнен. 

* Создайте каталог *dir*, а в нем два текстовых файла *a.txt* и *b.txt*. Чтобы при добавлении в git не перечислять их по отдельности, воспользуемся командой: **git add** , которая добавляет в git все новые файлы. И снова сохраним: **git commit -­m "dir added"**

### **Сохранение изменений файлов.** 

* Добавьте в файл *first.txt* еще одну строчку *"Some more text"* (не забудьте сохранить файл!). 
* Закоммитим изменения
Однако если мы воспользуемся известной нам командой

**git commit ­m "more text added to first.txt"**

то мы получим сообщение, что коммитить в общем­то нечего. 

**Тогда**:
* Необходимо воспользоваться описанной выше командой **git add** и **git commit -a**

*Наша команда будет такой*:

**git commit ­-a ­-m "more text added to first.txt"**

Ключ **-a** позволяет учесть изменения только в файлах, уже
находящихся под наблюдением **git**. А новые файлы перед коммитом необходимо
предварительно добавить командой **git add**.

### **Отправка изменений в главный репозиторий**

Для этого используется команда

**git push**

В процессе выполнения команды от вас потребуется ввести ваши *логин* и *пароль* от аккаунта на GitHub. 

После успешного завершения команды и обновления страницы, содержимое на странице с главным репозиторием совпадает с нашим локальным репозиторием.

### **Получение изменений из главного репозитория**

В новом окне терминала создадим еще одну локальную копию главного репозитория.
Если мы вносим изменения во второй файл "first.txt" (например, добавим туда еще одну строчку текста),
находящийся во втором репозитории:
* Сохраняем файл
* Коммитим файл 

**git commit ­a ­m "more changes in first.txt"** 

* Отправляем изменения на сервер: **git push**

Сейчас у нас синхронизированы главный и второй локальный репозитории, но первый локальный отстает. 

* Получаем изменения из главного
репозитория командой: **git pull**

* Получаем везде одинаковые версии

### **Разрешение конфликтов**

* Вносим изменения в первый файл *first.txt*
* Закоммитим
* Отправим их в главный репозиторий. 

* Во втором локальном репозитории создадим файл *second.txt* 
* Закоммитим измненеия 

*!Если из второго репозитория мы попробуем сделать **git push**, то получим      
ошибку из­-за конфликта изменений* 

**Что делать?**
* Получаем изменения из главного репозитория

* Объединяем их с нашими
изменениями

* Отправляем результат на главный репозиторий

**git pull**

Команда обновляет файл *first.txt* и добавляет *second.txt*

* Отправляем изменения командой **git push**

*Используем две последовательные команды:* 

* **git pull** - проверить на наличие новых изменений в репозитории, выкачать их и объединить с локальными изменениями
* **git push** - отправить изменения в репозиторий

## Итоговая сводка команд 

1. Создание локальной копии главного репозитория:

* **git clone https://github.com/oyasnev/test**

* *cd test  (не забыть перейти в каталог репозитория)*

2. Добавление новых файлов в репозиторий:

* Избранные файлы: 
   
    **git add file1 file2 file3**

* Все новые файлы: 
   
    **git add**

3. Сохранение изменений файлов:
    
    **git commit ­am "commit description"**

4. Получение изменений из главного репозитория:

    **git pull**

5.  Отправка изменений в главный репозиторий (с авторазрешением конфликтов):

* **git pull** *(проверить на наличие новых изменений в репозитории и выкачать их и объединить с локальными изменениями)*

* **git push**  *(отправить изменения в репозиторий)*

## Рекомендации по ведению репозитория 

1. Давать коммитам осмысленные описания

2. Делать **атомарные** коммиты, т.е. те, которые *можно описать одной фразой*, а не перечнем из нескольких пунктов

3. Планируйте работу в команде, чтобы несколько человек не редактировали одновремено одинаковые файлы. Это убережет вас от разрешения конфликтов
вручную

4. Сразу отправляйте коммиты в главный репозиторий. Тогда у всех участников будет
актуальная версия проекта.